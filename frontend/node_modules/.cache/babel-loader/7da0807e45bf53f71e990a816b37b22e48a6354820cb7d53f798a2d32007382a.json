{"ast":null,"code":"// src/store/index.js\nimport { createStore } from 'vuex';\nimport axios from 'axios';\nexport default createStore({\n  state: {\n    token: localStorage.getItem('token') || '',\n    user: null\n  },\n  mutations: {\n    setToken(state, token) {\n      state.token = token;\n    },\n    setUser(state, user) {\n      state.user = user;\n    },\n    clearAuth(state) {\n      state.token = '';\n      state.user = null;\n    }\n  },\n  actions: {\n    async login({\n      commit\n    }, credentials) {\n      try {\n        const response = await axios.post('http://localhost:8000/token', credentials);\n        const token = response.data.access_token;\n        localStorage.setItem('token', token);\n        commit('setToken', token);\n        // Kullanıcı bilgilerini almak için ek bir istek yapın\n        const userResponse = await axios.get('http://localhost:8000/users/me', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        commit('setUser', userResponse.data);\n      } catch (error) {\n        console.error('Login failed:', error);\n        throw error;\n      }\n    },\n    async fetchUser({\n      commit,\n      state\n    }) {\n      if (state.token) {\n        try {\n          const userResponse = await axios.get('http://localhost:8000/users/me', {\n            headers: {\n              'Authorization': `Bearer ${state.token}`\n            }\n          });\n          commit('setUser', userResponse.data);\n        } catch (error) {\n          console.error('Fetching user failed:', error);\n          commit('clearAuth');\n        }\n      }\n    },\n    logout({\n      commit\n    }) {\n      localStorage.removeItem('token');\n      commit('clearAuth');\n    }\n  },\n  modules: {}\n});","map":{"version":3,"names":["createStore","axios","state","token","localStorage","getItem","user","mutations","setToken","setUser","clearAuth","actions","login","commit","credentials","response","post","data","access_token","setItem","userResponse","get","headers","error","console","fetchUser","logout","removeItem","modules"],"sources":["/home/ubuntu/FastApiProject2/frontend/src/store/index.js"],"sourcesContent":["// src/store/index.js\nimport { createStore } from 'vuex'\nimport axios from 'axios'\n\nexport default createStore({\n  state: {\n    token: localStorage.getItem('token') || '',\n    user: null\n  },\n  mutations: {\n    setToken(state, token) {\n      state.token = token\n    },\n    setUser(state, user) {\n      state.user = user\n    },\n    clearAuth(state) {\n      state.token = ''\n      state.user = null\n    }\n  },\n  actions: {\n    async login({ commit }, credentials) {\n      try {\n        const response = await axios.post('http://localhost:8000/token', credentials)\n        const token = response.data.access_token\n        localStorage.setItem('token', token)\n        commit('setToken', token)\n        // Kullanıcı bilgilerini almak için ek bir istek yapın\n        const userResponse = await axios.get('http://localhost:8000/users/me', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        })\n        commit('setUser', userResponse.data)\n      } catch (error) {\n        console.error('Login failed:', error)\n        throw error\n      }\n    },\n    async fetchUser({ commit, state }) {\n      if (state.token) {\n        try {\n          const userResponse = await axios.get('http://localhost:8000/users/me', {\n            headers: {\n              'Authorization': `Bearer ${state.token}`\n            }\n          })\n          commit('setUser', userResponse.data)\n        } catch (error) {\n          console.error('Fetching user failed:', error)\n          commit('clearAuth')\n        }\n      }\n    },\n    logout({ commit }) {\n      localStorage.removeItem('token')\n      commit('clearAuth')\n    }\n  },\n  modules: {}\n})\n"],"mappings":"AAAA;AACA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,KAAK,MAAM,OAAO;AAEzB,eAAeD,WAAW,CAAC;EACzBE,KAAK,EAAE;IACLC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE;IAC1CC,IAAI,EAAE;EACR,CAAC;EACDC,SAAS,EAAE;IACTC,QAAQA,CAACN,KAAK,EAAEC,KAAK,EAAE;MACrBD,KAAK,CAACC,KAAK,GAAGA,KAAK;IACrB,CAAC;IACDM,OAAOA,CAACP,KAAK,EAAEI,IAAI,EAAE;MACnBJ,KAAK,CAACI,IAAI,GAAGA,IAAI;IACnB,CAAC;IACDI,SAASA,CAACR,KAAK,EAAE;MACfA,KAAK,CAACC,KAAK,GAAG,EAAE;MAChBD,KAAK,CAACI,IAAI,GAAG,IAAI;IACnB;EACF,CAAC;EACDK,OAAO,EAAE;IACP,MAAMC,KAAKA,CAAC;MAAEC;IAAO,CAAC,EAAEC,WAAW,EAAE;MACnC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMd,KAAK,CAACe,IAAI,CAAC,6BAA6B,EAAEF,WAAW,CAAC;QAC7E,MAAMX,KAAK,GAAGY,QAAQ,CAACE,IAAI,CAACC,YAAY;QACxCd,YAAY,CAACe,OAAO,CAAC,OAAO,EAAEhB,KAAK,CAAC;QACpCU,MAAM,CAAC,UAAU,EAAEV,KAAK,CAAC;QACzB;QACA,MAAMiB,YAAY,GAAG,MAAMnB,KAAK,CAACoB,GAAG,CAAC,gCAAgC,EAAE;UACrEC,OAAO,EAAE;YACP,eAAe,EAAE,UAAUnB,KAAK;UAClC;QACF,CAAC,CAAC;QACFU,MAAM,CAAC,SAAS,EAAEO,YAAY,CAACH,IAAI,CAAC;MACtC,CAAC,CAAC,OAAOM,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;QACrC,MAAMA,KAAK;MACb;IACF,CAAC;IACD,MAAME,SAASA,CAAC;MAAEZ,MAAM;MAAEX;IAAM,CAAC,EAAE;MACjC,IAAIA,KAAK,CAACC,KAAK,EAAE;QACf,IAAI;UACF,MAAMiB,YAAY,GAAG,MAAMnB,KAAK,CAACoB,GAAG,CAAC,gCAAgC,EAAE;YACrEC,OAAO,EAAE;cACP,eAAe,EAAE,UAAUpB,KAAK,CAACC,KAAK;YACxC;UACF,CAAC,CAAC;UACFU,MAAM,CAAC,SAAS,EAAEO,YAAY,CAACH,IAAI,CAAC;QACtC,CAAC,CAAC,OAAOM,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;UAC7CV,MAAM,CAAC,WAAW,CAAC;QACrB;MACF;IACF,CAAC;IACDa,MAAMA,CAAC;MAAEb;IAAO,CAAC,EAAE;MACjBT,YAAY,CAACuB,UAAU,CAAC,OAAO,CAAC;MAChCd,MAAM,CAAC,WAAW,CAAC;IACrB;EACF,CAAC;EACDe,OAAO,EAAE,CAAC;AACZ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}